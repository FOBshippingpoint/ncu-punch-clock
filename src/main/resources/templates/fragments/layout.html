<!doctype html>
<html th:fragment="layout (template)">

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>ğŸ§™â€â™‚ï¸NCUæ‰“å¡é­”æ³•å¸«</title>
    <!-- new.css: https://github.com/xz/new.css -->
    <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <!-- custom css -->
    <link rel="stylesheet" th:href="@{/resources/css/styles.css}"/>
</head>

<body>
<header>
    <h1><a th:href="@{/}" style="text-decoration: inherit; color: inherit;">NCUæ‰“å¡é­”æ³•å¸«</a></h1>
    <nav>
        <th:block sec:authorize="isAuthenticated()">
            <a th:href="@{/schedules}">æ‰“å¡æ¸…å–®</a> /
            <th:block sec:authorize="!hasRole('ROLE_ADMIN')">
                <a th:href="@{/schedules/new}">æ–°å¢æ’ç¨‹</a> /
                <a th:href="@{/change_ifttt_key}">é€šçŸ¥è¨­å®š</a> /
            </th:block>
            <a th:href="@{/change_password}">æ›´æ”¹å¯†ç¢¼</a> /
            <th:block sec:authorize="hasRole('ROLE_ADMIN')">
                <a th:href="@{/admin/users}">ä½¿ç”¨è€…ç®¡ç†</a> /
                <a th:href="@{/admin/passcodes}">é‚€è«‹ç¢¼ç®¡ç†</a> /
            </th:block>
            <form id="logout_form" th:action="@{/logout}" method="post" class="inline_form">
                <a id="logout" href="#">ç™»å‡º</a>
                <script>
                    document
                        .getElementById('logout')
                        .addEventListener('click', () => document.getElementById('logout_form').submit());
                </script>
            </form>
        </th:block>
        <th:block sec:authorize="!isAuthenticated()">
            <a th:href="@{/login}">ç™»å…¥</a> /
            <a th:href="@{/sign_up}">è¨»å†Š</a>
        </th:block>
    </nav>
</header>

<blockquote th:if="${notification} != null">
    <p th:text="${notification}"></p>
</blockquote>
<th:block th:insert="${template}"/>

<script>
    document.querySelectorAll('.confirm_btn').forEach(btn => {
        btn.addEventListener('click', e => {
            if (!confirm(`ç¢ºå®šè¦${btn.textContent}å—ï¼Ÿ`)) {
                e.preventDefault();
            }
        });
    });
</script>

<br/>
<hr>
<br/>

<footer>
    <p>
        Ê• â€¢á´¥â€¢Ê” made by <a href="https://github.com/FOBshippingpoint/" target="_blank">CC Lan</a> |
        <a href="https://github.com/FOBshippingpoint/ncu-punch-clock" target="_blank">GitHub</a>
    </p>
</footer>
</body>

</html>